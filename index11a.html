<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>ŞEBAL KEYBOARD (CHORAL)</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background:#2c3e50; font-family:Arial,sans-serif;
      display:flex; justify-content:center; align-items:center;
      min-height:100vh;
    }
    .outer-frame {
      width:1600px; background:#222; border:10px solid #000;
      border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.5);
      padding:20px;
    }
    .header {
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 30px; background:#111; border-radius:8px;
      box-shadow:inset 0 -1px 5px rgba(255,255,255,0.05), 0 2px 8px rgba(0,0,0,0.4);
      margin-bottom:20px;
    }
    .header h1 {
      font-size:2em;
      background:linear-gradient(90deg, #007bff, #ffc107, #dc3545);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      text-shadow:1px 1px 2px rgba(0,0,0,0.7);
    }
    .control-panel {
      display:flex; gap:20px; align-items:center;
    }
    .control-panel select, .control-panel button, .control-panel .slider-label {
      color:#f0c75e;
    }
    .control-panel select, .control-panel button {
      padding:8px 12px; font-size:1em;
      border:2px solid #666; border-radius:5px;
      background:#444; cursor:pointer;
    }
    .control-panel button.active {
      background:#e6b800; box-shadow:0 0 5px #e6b800;
    }
    .volume-container {
      display:flex; align-items:center; gap:8px;
    }
    #volumeControl {
      -webkit-appearance:none; width:200px; height:8px;
      border-radius:5px; background:#444;
    }
    #volumeControl::-webkit-slider-thumb {
      -webkit-appearance:none; background:#f0c75e;
      width:20px; height:20px; border-radius:50%;
      box-shadow:0 2px 5px rgba(0,0,0,0.3);
      cursor:pointer;
    }
    .main-area { display:flex; justify-content:center; }
    .instrument-body {
      background:#3b3e3b; width:1460px;
      padding:20px; border-radius:10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.4);
    }
    .piano { position:relative; width:1406px; height:300px; margin:0 auto; }
    .white-keys { display:flex; }
    .white-key {
      width:70px; height:300px; margin:0 2px;
      background:#f5f5f5; border:1px solid #ccc;
      border-radius:5px;
      box-shadow:0 1px 2px rgba(0,0,0,0.15);
      cursor:pointer; transition:box-shadow 0.1s;
    }
    .white-key.active { box-shadow:inset 0 0 6px rgba(0,0,0,0.3); }
    .black-keys {
      position:absolute; top:0; left:0;
      width:1406px; height:180px; pointer-events:none;
    }
    .black-key {
      position:absolute; width:40px; height:180px;
      background:#2c3e50; border:1px solid #333;
      border-radius:5px;
      box-shadow:0 1px 2px rgba(0,0,0,0.2);
      pointer-events:auto; cursor:pointer;
      transition:box-shadow 0.1s;
    }
    .black-key.active { box-shadow:inset 0 0 6px rgba(0,0,0,0.4); }
    .black-keys div:nth-of-type(1){left:52px;}  .black-keys div:nth-of-type(2){left:126px;}
    .black-keys div:nth-of-type(3){left:200px;} .black-keys div:nth-of-type(4){left:340px;}
    .black-keys div:nth-of-type(5){left:430px;} .black-keys div:nth-of-type(6){left:570px;}
    .black-keys div:nth-of-type(7){left:644px;} .black-keys div:nth-of-type(8){left:725px;}
    .black-keys div:nth-of-type(9){left:860px;} .black-keys div:nth-of-type(10){left:945px;}
    .black-keys div:nth-of-type(11){left:1088px;} .black-keys div:nth-of-type(12){left:1162px;}
    .black-keys div:nth-of-type(13){left:1245px;}
    .key-blue   { box-shadow:inset 0 0 12px rgba(0,123,255,0.75), 0 0 16px rgba(0,123,255,0.75); }
    .key-red    { box-shadow:inset 0 0 12px rgba(220,53,69,0.75), 0 0 16px rgba(220,53,69,0.75); }
    .key-yellow { box-shadow:inset 0 0 12px rgba(255,193,7,0.75), 0 0 16px rgba(255,193,7,0.75); }
  </style>
</head>
<body>
  <div class="outer-frame">
    <div class="header">
      <h1>ŞEBAL KEYBOARD (CHORAL)</h1>
      <div class="control-panel">
        <select id="teacherSelect">
          <option value="koray">Koray Hoca</option>
          <option value="merve">Merve Hoca</option>
          <option value="sevgi">Sevgi Hoca</option>
        </select>
        <button id="sustainToggle">Sustain Off</button>
        <div class="volume-container">
          <span class="slider-label">Volume</span>
          <input id="volumeControl" type="range" min="0" max="1" step="0.01" value="1">
        </div>
      </div>
    </div>
    <div class="main-area">
      <div class="instrument-body">
        <div class="piano">
          <div class="white-keys">
            <div class="white-key" data-key="F2"></div><div class="white-key" data-key="G2"></div>
            <div class="white-key" data-key="A2"></div><div class="white-key" data-key="B2"></div>
            <div class="white-key" data-key="C3"></div><div class="white-key" data-key="D3"></div>
            <div class="white-key" data-key="E3"></div><div class="white-key" data-key="F3"></div>
            <div class="white-key" data-key="G3"></div><div class="white-key" data-key="A3"></div>
            <div class="white-key" data-key="B3"></div><div class="white-key" data-key="C4"></div>
            <div class="white-key" data-key="D4"></div><div class="white-key" data-key="E4"></div>
            <div class="white-key" data-key="F4"></div><div class="white-key" data-key="G4"></div>
            <div class="white-key" data-key="A4"></div><div class="white-key" data-key="B4"></div>
            <div class="white-key" data-key="C5"></div>
          </div>
          <div class="black-keys">
            <div class="black-key" data-key="FaS2"></div><div class="black-key" data-key="SolS2"></div>
            <div class="black-key" data-key="LaS2"></div><div class="black-key" data-key="DoS3"></div>
            <div class="black-key" data-key="ReS3"></div><div class="black-key" data-key="FaS3"></div>
            <div class="black-key" data-key="SolS3"></div><div class="black-key" data-key="LaS3"></div>
            <div class="black-key" data-key="DoS4"></div><div class="black-key" data-key="ReS4"></div>
            <div class="black-key" data-key="FaS4"></div><div class="black-key" data-key="SolS4"></div>
            <div class="black-key" data-key="LaS4"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    const teacherSelect=document.getElementById('teacherSelect');
    const volumeControl=document.getElementById('volumeControl');
    const sustainToggle=document.getElementById('sustainToggle');
    let currentVolume=+volumeControl.value, sustainOn=false;
    volumeControl.oninput=()=>currentVolume=+volumeControl.value;
    sustainToggle.onclick=()=>sustainToggle.classList.toggle('active', sustainOn=!sustainOn) &&
      (sustainToggle.textContent=sustainOn?'Sustain On':'Sustain Off');
    const noteOrder=['F2','FaS2','G2','SolS2','A2','LaS2','B2',
      'C3','DoS3','D3','ReS3','E3','F3','FaS3','G3','SolS3','A3','LaS3','B3',
      'C4','DoS4','D4','ReS4','E4','F4','FaS4','G4','SolS4','A4','LaS4','B4','C5'];
    function applyKeyHighlights(){
      document.querySelectorAll('.white-key, .black-key').forEach(k=>k.classList.remove('key-blue','key-red','key-yellow'));
      let [s,e,c]=teacherSelect.value==='koray'?['F2','C4','key-blue']:
                  teacherSelect.value==='merve'?['F2','G4','key-red']:['A2','D4','key-yellow'];
      noteOrder.slice(noteOrder.indexOf(s),noteOrder.indexOf(e)+1)
        .forEach(n=>document.querySelectorAll(`[data-key='${n}']`).forEach(el=>el.classList.add(c)));
    }
    teacherSelect.onchange=applyKeyHighlights; applyKeyHighlights();
    const keys=document.querySelectorAll('.white-key, .black-key');
    function fadeOut(a,d=1500){let i=a.volume/(d/50),t=setInterval(()=>{if(a.volume>i)a.volume-=i;else clearInterval(t)&&a.pause();},50);}
    function playKey(el){let n=el.dataset.key,t=teacherSelect.value,a=new Audio(`sounds/${t}/${encodeURIComponent(n)}.mp3`);
      a.volume=currentVolume;a.play();el.audio=a;el.classList.add('active');}
    function stopKey(el){if(el.audio){sustainOn?fadeOut(el.audio):el.audio.pause();el.classList.remove('active');}}
    keys.forEach(k=>{k.onmousedown=()=>playKey(k);k.onmouseup=()=>stopKey(k);k.onmouseleave=()=>stopKey(k);
      k.ontouchstart=()=>playKey(k);k.ontouchend=()=>stopKey(k);});
    // MIDI
    const midiMap={41:'F2',42:'FaS2',43:'G2',44:'SolS2',45:'A2',46:'LaS2',47:'B2',
      48:'C3',49:'DoS3',50:'D3',51:'ReS3',52:'E3',53:'F3',54:'FaS3',55:'G3',56:'SolS3',57:'A3',58:'LaS3',59:'B3',
      60:'C4',61:'DoS4',62:'D4',63:'ReS4',64:'E4',65:'F4',66:'FaS4',67:'G4',68:'SolS4',69:'A4',70:'LaS4',71:'B4',72:'C5'};
    let midiActive={};
    function onMIDISuccess(m){for(let inp of m.inputs.values()){inp.onmidimessage=msg=>{
      let[c,n,v]=msg.data; if(c===144&&v>0)playKey(document.querySelector(`[data-key='${midiMap[n]}']`));
      else if(c===128||c===144&&v===0)stopKey(document.querySelector(`[data-key='${midiMap[n]}']`));};break;}}
    if(navigator.requestMIDIAccess)navigator.requestMIDIAccess().then(onMIDISuccess);
    // PC Klavye
   const keyboardMapping = {
  "q": "F2",       // Beyaz: fa2
  "2": "FaS2",     // Siyah: fa diyez2
  "w": "G2",       // Beyaz: sol2
  "3": "SolS2",    // Siyah: sol diyez2
  "e": "A2",       // Beyaz: la2
  "4": "LaS2",     // Siyah: la diyez2
  "r": "B2",       // Beyaz: si2

  // 2. ARALIK (C3 - E3)
  // Beyaz: C3, D3, E3
  // Siyah: C#3 (DoS3) ve D#3 (ReS3)
  "t": "C3",       // Beyaz: do3
  "6": "DoS3",     // Siyah: do diyez3
  "y": "D3",       // Beyaz: re3
  "7": "ReS3",     // Siyah: re diyez3
  "u": "E3",       // Beyaz: mi3

  // 3. ARALIK (F3 - B3)
  // Beyaz: F3, G3, A3, B3
  // Siyah: F#3 (FaS3), G#3 (SolS3), A#3 (LaS3)
  "ı": "F3",       // Beyaz: fa3
  "9": "FaS3",     // Siyah: fa diyez3
  "o": "G3",       // Beyaz: sol3
  "0": "SolS3",    // Siyah: sol diyez3
  "p": "A3",       // Beyaz: la3
  "*": "LaS3",     // Siyah: la diyez3
  "ğ": "B3",       // Beyaz: si3

  // 4. ARALIK (C4 - C5)
  // Beyaz: C4, D4, E4, F4, G4, A4, B4, C5
  // Siyah: C#4 (DoS4), D#4 (ReS4), F#4 (FaS4), G#4 (SolS4), A#4 (LaS4)
  "z": "C4",       // Beyaz: do4
  "s": "DoS4",     // Siyah: do diyez4
  "x": "D4",       // Beyaz: re4
  "d": "ReS4",     // Siyah: re diyez4
  "c": "E4",       // Beyaz: mi4
  "v": "F4",       // Beyaz: fa4
  "g": "FaS4",     // Siyah: fa diyez4
  "b": "G4",       // Beyaz: sol4
  "h": "SolS4",    // Siyah: sol diyez4
  "n": "A4",       // Beyaz: la4
  "j": "LaS4",     // Siyah: la diyez4
  "m": "B4",       // Beyaz: si4
  "ö": "C5"        // Beyaz: do5
};

    let pcActive={};
    document.addEventListener('keydown',e=>{
      let k=e.key.toLowerCase(); if(keyboardMapping[k]&&!pcActive[k]){
        pcActive[k]=true; let el=document.querySelector(`[data-key='${keyboardMapping[k]}']`);
        if(el)playKey(el);
      }
    });
    document.addEventListener('keyup',e=>{
      let k=e.key.toLowerCase(); if(keyboardMapping[k]){
        pcActive[k]=false; let el=document.querySelector(`[data-key='${keyboardMapping[k]}']`);
        if(el)stopKey(el);
      }
    });
  </script>
</body>
</html>
